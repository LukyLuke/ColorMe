<!DOCTYPE html>
<html>
	<head>
		<title>HSV / RGB convert and calculation</title>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="colorme.css" />
		<script src="js/ColorAdjust.js"></script>
		<script type="text/javascript">
			var adjust, c1, c2, cont1, cont2, arrow;
			function init() {
				adjust = new ColorAdjust();
				cont1 = d('color1_container'), cont2 = d('color2_container'), arrow = d('color_arrow'), c1 = d('color1'), c2 = d('color2');
				c1.onblur = function() {
					var o = adjust.fromHEX(this.value);
					cont1.style.backgroundColor = o.hex;
					arrow.style.borderTopColor = o.hex;
					adjustSlider();
				};
				c2.onblur = function() {
					var o = adjust.fromHEX(this.value);
					cont2.style.backgroundColor = o.hex;
					adjustSlider();
				};
				if (c1.value.length) { c1.onblur(); };
				if (c2.value.length) { c2.onblur(); };
			};
			function adjustSlider() {
				if (c1.value.length) {
					var o = adjust.fromHEX( c2.value.length ? c2.value : c1.value );
					var h = child('slide_hue', 'a'), s = child('slide_sat', 'a'), l = child('slide_light', 'a');
					var width = d('slide_light').clientWidth, sw = h.clientWidth;
					var pos = {
						l: o.l * width,
						s: o.s * width,
						h: o.h / 360 * width
					};
					l.style.left = ( pos.l - sw/2 ) + 'px';
					s.style.left = ( pos.s - sw/2 ) + 'px';
					h.style.left = ( pos.h - sw/2 ) + 'px';
					
					d('sass_string').innerHTML = adjust.sassDifference(c1.value, c2.value, true);
				}
			};
			function d(id) {
				return document.getElementById(id);
			};
			function child(id, name) {
				var elem = d(id);
				if (elem) {
					var elems = elem.getElementsByTagName(name);
					if (elems && elems.length) {
						return elems[0];
					}
				}
				return null;
			};
		</script>
	</head>
	<body onload="init();" marginwidth="0" marginheight="0">
		<div class="wrapper page">
			<div class="container shadow colors">
				<div class="color color_top" id="color1_container">
					<div class="color_input">
						<label for="color1">#</label>
						<input name="color1" id="color1" maxlength="6" type="text" placeholder="DF58A1" />
					</div>
					<div class="color_pointer" id="color_arrow"> </div>
				</div>
				<div class="color color_bottom" id="color2_container">
					<div class="color_input">
						<label for="color2">#</label>
						<input name="color2" id="color2" maxlength="6" type="text" placeholder="DF58A1" />
					</div>
				</div>
			</div>
			
			<div class="container sass shadow">
				<label for="sass_string">SASS-String</label>
				<span id="sass_string" class="string"> </span>
			</div>
			
			<div class="container sliders">
				<div class="slider_container">
					<div class="slider" id="slide_light">
						<a href="#" class="slider">&bull;</a>
					</div>
					<label for="slider_light">Lightness</label>
				</div>
				<div class="slider_container">
					<div class="slider" id="slide_sat">
						<a href="#" class="slider">&bull;</a>
					</div>
					<label for="slider_sat">Saturation</label>
				</div>
				<div class="slider_container">
					<div class="slider" id="slide_hue">
						<a href="#" class="slider">&bull;</a>
					</div>
					<label for="slide_hue">Color/Hue</label>
				</div>
			</div>
		</div>
	</body>
</html>